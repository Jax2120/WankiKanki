:root{
  --wk-purple:#9f00ee;
  --wk-purple2:#9f00ee;
  --wk-gray:#e9e9e9;
  --wk-border:#cfcfcf;
  --wk-text:#2b2b2b;
  --wk-good:#83c700;
  --wk-bad:#ff0037;
}

*{box-sizing:border-box;}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,"Hiragino Kaku Gothic ProN",Meiryo,sans-serif;
  background:#0f0f10;
}
body.font-modern,
body.font-system{
  font-family:"Aptos","Segoe UI Variable","Segoe UI",Roboto,Arial,"Hiragino Kaku Gothic ProN",Meiryo,sans-serif;
}
body.font-friendly{
  font-family:"Trebuchet MS","Verdana","Segoe UI",Tahoma,Arial,"Hiragino Kaku Gothic ProN",Meiryo,sans-serif;
}
body.font-book,
body.font-serif{
  font-family:Cambria,Georgia,"Times New Roman",Times,serif;
}
body.font-clean,
body.font-mono{
  font-family:"Cascadia Mono","Consolas","Courier New",monospace;
}

.wk-header{
  background:linear-gradient(180deg,var(--wk-purple),var(--wk-purple2));
  height:260px;
  color:#fff;
  position:relative;
}

.wk-topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:14px 18px;
  font-size:18px;
  opacity:0.95;
}

.wk-left{letter-spacing:0;}
.wk-right{font-weight:600;}
.wk-topbar .wk-left,
.wk-topbar .wk-right{
  min-width:120px;
}
.wk-back-link{
  color:#fff;
  text-decoration:none;
  font-weight:700;
  padding:4px 10px;
  border:1px solid rgba(255,255,255,0.55);
  border-radius:4px;
}
.wk-back-link:hover{
  background:rgba(255,255,255,0.14);
}
#remaining{
  display:inline-block;
  padding:4px 10px;
  border:1px solid rgba(255,255,255,0.4);
  border-radius:999px;
  background:rgba(255,255,255,0.12);
  font-size:15px;
  letter-spacing:0.01em;
}

.wk-big{
  position:absolute;
  left:50%;
  top:50%;
  transform:translate(-50%,-35%);
  font-size:120px;
  font-weight:700;
  line-height:1;
  text-shadow:0 2px 0 rgba(0,0,0,0.2);
}

.wk-main{
  background:var(--wk-gray);
  min-height:calc(100vh - 260px);
  padding:18px 0 60px;
}

.wk-subhead{
  text-align:center;
  color:#666;
  font-size:28px;
  font-weight:300;
  margin:8px 0 10px;
}
.wk-type{margin-right:10px;}
.wk-mode{font-weight:700;}
.wk-deck-label{
  margin-left:12px;
  color:#8b8b8b;
  font-size:18px;
  font-weight:500;
}

.wk-progress{
  width:100%;
  height:4px;
  background:#d7d7d7;
  margin:14px 0 20px;
  position:relative;
}
.wk-bar{
  height:100%;
  width:0%;
  background:#2aa9ff;
  transition:width 220ms ease;
}

.wk-answer-row{
  width:min(1200px, 92vw);
  margin:0 auto;
  position:relative;
}

#answer{
  width:100%;
  font-size:40px;
  padding:22px 70px 22px 24px;
  border:2px solid #bcdcff;
  border-radius:4px;
  outline:none;
  background:#fff;
  color:#333;
  text-align:center;
}
#answer::placeholder{ text-align:center; }

.wk-arrow{
  position:absolute;
  right:22px;
  top:50%;
  transform:translateY(-50%);
  font-size:44px;
  color:#2b2b2b;
  opacity:0.65;
  user-select:none;
}

.wk-result{
  width:min(1200px, 92vw);
  margin:14px auto 0;
  border-radius:2px;
  padding:18px 20px;
  color:#fff;
  font-size:30px;
  font-weight:600;
}
.wk-result.good{background:var(--wk-good);}
.wk-result.bad{background:var(--wk-bad);}

.wk-expected{
  width:min(1200px, 92vw);
  margin:10px auto 0;
  color:#333;
  font-size:22px;
}

.wk-hint{
  width:min(1200px, 92vw);
  margin:10px auto 0;
  color:#666;
  font-size:16px;
}

.hidden{display:none;}

.shake{
  animation:shake 0.25s linear;
}
@keyframes shake{
  0%{transform:translateX(0);}
  25%{transform:translateX(-8px);}
  50%{transform:translateX(8px);}
  75%{transform:translateX(-8px);}
  100%{transform:translateX(0);}
}

/* Big prompt (WK-style) */
#big { white-space: nowrap; overflow: hidden; }

/* FULL-SCREEN FEEDBACK TINT (WK-ish) */
body.wk-good .wk-main { background:#dff3bf; }
body.wk-bad  .wk-main { background:#ffd1d8; }

/* Splash */
.wk-splash-header{
  height:220px;
}
.wk-splash-title{
  position:absolute;
  left:50%;
  top:56%;
  transform:translate(-50%,-50%);
  font-size:56px;
  font-weight:800;
  text-shadow:0 2px 0 rgba(0,0,0,0.2);
}
.wk-splash-main{
  min-height:calc(100vh - 220px);
  padding:30px 20px 60px;
}
.wk-tiles{
  width:min(1100px, 94vw);
  margin:0 auto;
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:18px;
}
.wk-tile{
  display:block;
  text-decoration:none;
  color:#fff;
  border-radius:8px;
  padding:26px 24px;
  min-height:220px;
  box-shadow:0 6px 14px rgba(0,0,0,0.14);
  transition:transform 120ms ease, filter 120ms ease;
}
.wk-tile:hover{
  transform:translateY(-2px);
  filter:brightness(1.03);
}
.wk-tile-lessons{
  background:linear-gradient(180deg,#22a6f2,#178cd8);
}
.wk-tile-reviews{
  background:linear-gradient(180deg,#9f00ee,#8600c9);
}
.wk-tile-label{
  font-size:34px;
  font-weight:800;
  letter-spacing:0.5px;
}
.wk-tile-count{
  margin-top:20px;
  font-size:90px;
  line-height:0.95;
  font-weight:800;
}
.wk-tile-sub{
  margin-top:10px;
  font-size:16px;
  opacity:0.95;
}
.wk-deck-selector-wrap{
  width:min(520px, 94vw);
  margin:34px auto 0;
  text-align:center;
}
.wk-deck-label-title{
  display:block;
  color:#555;
  font-size:15px;
  font-weight:700;
  margin-bottom:10px;
}
.wk-deck-select{
  width:100%;
  padding:12px 14px;
  border-radius:6px;
  border:1px solid var(--wk-border);
  font-size:18px;
  background:#fff;
  color:#222;
}
.wk-deck-note{
  margin:10px 2px 0;
  color:#666;
  font-size:14px;
  line-height:1.45;
  text-align:left;
}
.wk-deck-note-image{
  display:block;
  width:100%;
  margin-top:10px;
  border:1px solid var(--wk-border);
  border-radius:8px;
  box-shadow:0 4px 12px rgba(0,0,0,0.08);
}
.wk-example-toggle{
  margin-top:8px;
  cursor:pointer;
  color:#3f3f3f;
  font-weight:700;
  user-select:none;
  display:inline-block;
  padding:8px 12px;
  border:1px solid var(--wk-border);
  border-radius:6px;
  background:#fff;
}
.wk-deck-note-example{
  margin-top:8px;
  text-align:left;
}
.wk-deck-missing{
  margin-top:10px;
  color:#8a2d2d;
  font-size:14px;
}
.wk-splash-main.api-required .wk-tiles,
.wk-splash-main.api-required .wk-deck-selector-wrap{
  opacity:0.4;
}
.wk-splash-main.api-required .wk-tiles{
  pointer-events:none;
}
.wk-splash-main.api-required .wk-deck-select{
  pointer-events:none;
}
.wk-api-gate{
  width:min(640px, 94vw);
  margin:22px auto 0;
  background:#fff;
  border:1px solid var(--wk-border);
  border-radius:8px;
  padding:16px;
}
.wk-api-title{
  margin:0 0 8px;
  font-size:22px;
  color:#303030;
}
.wk-api-copy{
  margin:0 0 12px;
  color:#606060;
}
.wk-api-steps{
  margin:0 0 12px 22px;
  color:#444;
}
.wk-api-steps li{
  margin:6px 0;
}
.wk-api-row{
  display:flex;
  gap:10px;
  align-items:center;
  margin-top:10px;
}

.wk-lesson-panel{
  width:min(1200px, 92vw);
  margin:0 auto;
}
.wk-lesson-card{
  background:#fff;
  border:1px solid var(--wk-border);
  border-radius:8px;
  padding:22px;
}
.wk-lesson-kicker{
  font-size:14px;
  font-weight:700;
  color:#666;
  text-transform:uppercase;
  letter-spacing:0.04em;
}
.wk-lesson-front{
  font-size:52px;
  font-weight:800;
  color:#333;
  margin:8px 0 14px;
}
.wk-lesson-line{
  display:flex;
  gap:14px;
  align-items:flex-start;
  padding:8px 0;
  border-top:1px solid #eee;
}
.wk-lesson-label{
  min-width:88px;
  color:#666;
  font-weight:700;
}
.wk-lesson-value{
  color:#222;
  font-size:22px;
}
.wk-lesson-actions{
  display:flex;
  gap:10px;
  margin-top:12px;
}
.wk-lesson-btn{
  border:1px solid #b7b7b7;
  background:#fff;
  color:#333;
  padding:10px 16px;
  border-radius:5px;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}
.wk-lesson-btn[disabled]{
  opacity:0.45;
  cursor:not-allowed;
}
.wk-lesson-btn-primary{
  background:#2aa9ff;
  color:#fff;
  border-color:#2aa9ff;
}
.wk-settings-panel{
  width:min(860px, 94vw);
  margin:0 auto;
  background:#fff;
  border:1px solid var(--wk-border);
  border-radius:8px;
  padding:22px;
}
.wk-settings-title{
  margin:0 0 12px;
  font-size:24px;
  color:#333;
}
.wk-settings-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(220px, 1fr));
  gap:12px;
  margin-bottom:22px;
}
.wk-settings-field{
  display:flex;
  flex-direction:column;
  gap:8px;
  color:#555;
  font-size:14px;
  font-weight:700;
}
.wk-settings-field input[type="color"]{
  width:100%;
  height:44px;
  border:1px solid var(--wk-border);
  border-radius:6px;
  background:#fff;
}
.wk-settings-text{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--wk-border);
  border-radius:6px;
  font-size:16px;
}
.wk-settings-readonly{
  width:100%;
  padding:10px 12px;
  border:1px solid var(--wk-border);
  border-radius:6px;
  font-size:16px;
  background:#f8f8f8;
  color:#444;
}
.wk-settings-actions{
  display:flex;
  align-items:center;
  gap:12px;
}
.wk-settings-status{
  color:#2d7b00;
  font-weight:700;
}
.wk-settings-status-error{
  color:#a80028;
}

@media (max-width: 860px){
  .wk-big{
    font-size:78px;
  }
  .wk-tiles{
    grid-template-columns:1fr;
  }
  .wk-tile{
    min-height:170px;
  }
  .wk-tile-count{
    font-size:68px;
  }
  .wk-splash-title{
    font-size:42px;
  }
}
